{% extends 'base.html' %}

{% block css %}
<link rel="stylesheet" href="/static/libs/CodeMirror/lib/codemirror.css">
<link rel="stylesheet" href="/static/libs/CodeMirror/theme/mdn-like.css">
<link rel="stylesheet" href="/static/addon/dialog/dialog.css">

<style>
.CodeMirror {
  border: 1px solid #eee;
  min-height: 200px;
  border-bottom: 1px solid #eee;
}

#answer {
  margin-bottom: 36px;
}
</style>
{% endblock %}
{% block headjs %}
<script src="/static/libs/CodeMirror/lib/codemirror.js" type="text/javascript" charset="utf-8"></script>
<script src="/static/libs/CodeMirror/addon/edit/matchbrackets.js" type="text/javascript" charset="utf-8"></script>
<script src="/static/libs/CodeMirror/mode/python/python.js" type="text/javascript" charset="utf-8"></script>
<script src="/static/mode/clike/clike.js" type="text/javascript" charset="utf-8"></script>
<script src="/static/keymap/vim.js" type="text/javascript" charset="utf-8"></script>
<script src="/static/addon/edit/matchbrackets.js" type="text/javascript" charset="utf-8"></script>
<script src="/static/addon/comment/comment.js" type="text/javascript" charset="utf-8"></script>
<script src="/static/addon/dialog/dialog.js" type="text/javascript" charset="utf-8"></script>
<script src="/static/addon/search/searchcursor.js" type="text/javascipt" charset="utf-8"></script>
<script src="/static/addon/search/search.js" type="text/javascript" charset="utf-8"></script>

{% endblock %}
{% block content %}
<div class="row">
  <div class="col-sm-10 col-sm-offset-1">
    <h2>Question {{ q_name }} <small>{{ q_desc }}</small></h2>
    <p><pre><code>{{ q_doc }}</code></pre></p>
  </div>
</div>
<div class="row">
  <div class="col-sm-10 col-sm-offset-1">
    <h3>Answer</h3>
    <form action="/play/" method="post" id="answer">
      <div class="form-group">
        <textarea name="code" id="code">{{ example_ans }}</textarea>
      </div>
      <div class="form-group">Key buffer: <span id="command-display"></span></div>
<div style="font-size: 10px;">

<p>The vim keybindings are enabled by including <code><a
href="../keymap/vim.js">keymap/vim.js</a></code> and setting the
<code>keyMap</code> option to <code>vim</code>.</p>

<p><strong></strong></p>
<ul>
  * * * * * * * * * * * h i n t * * * * * * * * * * *
  <li>All common motions and operators, including text objects</li>
  <li>Operator motion orthogonality</li>
  <li>Visual mode - characterwise, linewise, blockwise</li>
  <li>Full macro support (q, @)</li>
  <li>Incremental highlighted search (/, ?, #, *, g#, g*)</li>
  <li>Search/replace with confirm (:substitute, :%s)</li>
  <li>Search history</li>
  <li>Jump lists (Ctrl-o, Ctrl-i)</li>
  <li>Key/command mapping with API (:map, :nmap, :vmap)</li>
  <li>Sort (:sort)</li>
  <li>Marks (`, ')</li>
  <li>:global</li>
  <li>Insert mode behaves identical to base CodeMirror</li>
  <li>Cross-buffer yank/paste</li>
  * * * * * * * * * * * h i n t * * * * * * * * * * *
</ul>
</div>
      <div class="row">
        <div class="col-sm-8">
          <div class="form-group">
            <label class="col-sm-3 control-label" for="player_name">Player Name</label>
            <input class="col-sm-8" type="text" name="player_name" placeholder="{{ player_name }}">
          </div>
        </div>
        <button class="col-sm-2 btn btn-danger" type="submit">Submit</button>
      </div><!-- /.row -->
    </form>
  </div><!-- /.col -->
</div><!-- /.row -->
{% endblock content %}

{% block js %}
<script>
var editor = CodeMirror.fromTextArea(document.getElementById("code"), {
  mode: {name: "python",
    version: 3,
    singleLineStringErrors: false},
  lineNumbers: true,
  indentUnit: 4,
  matchBrackets: true,
  showCursorWhenSelecting: true,
  lineWrapping: true,
  theme: 'mdn-like',
  keyMap: "vim",
});
      var commandDisplay = document.getElementById('command-display');
      var keys = '';
      CodeMirror.on(editor, 'vim-keypress', function(key) {
        keys = keys + key;
        commandDisplay.innerHTML = keys;
      });
      CodeMirror.on(editor, 'vim-command-done', function(e) {
        keys = '';
        commandDisplay.innerHTML = keys;
      });

</script>
{% endblock %}
